import{f as y,j as e,u as k,r as l,h as A,B as z,k as c,l as j,W as H,P,X as B,Y as N,Z as b,$ as r,a0 as q,I as w,a1 as G,a2 as J,a3 as L,H as d,z as f,a4 as V}from"./vendor-CLzwre8y.js";import{a as F,s as h}from"./index-CYMg94ex.js";import{M as R}from"./MarkdownEditor-BeRdleL5.js";import"./supabase-DTekwhgc.js";const X=y(e.jsx("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutlineOutlined"),Y=y(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutlineOutlined"),Z=y(e.jsx("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92zM17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"}),"EditOutlined");function ee(){const{user:i}=F(),v=k(),[_,O]=l.useState([]),[E,C]=l.useState(!1),[p,m]=l.useState(null),[s,a]=l.useState({title:"",description:"",image_path:"",content:""}),D=[{name:"coder",title:"Coder",description:"Exploring the world of programming and software development",image_path:"/images/coder.jpg",route_path:"/coder"},{name:"golfer",title:"Golfer",description:"Sharing golf experiences, tips, and achievements",image_path:"/images/golfer.jpg",route_path:"/golfer"},{name:"mentor",title:"Mentor",description:"Guiding and supporting others in their journey",image_path:"/images/mentor.jpg",route_path:"/mentor"},{name:"older",title:"Older",description:"Insights and reflections on the aging process",image_path:"/images/older.jpg",route_path:"/older"}];l.useEffect(()=>{if(!i||i.email!=="golfergeek@gmail.com"){v("/");return}(async()=>{try{for(const n of D){const{error:o}=await h.from("interests").update({image_path:n.image_path}).eq("name",n.name);o&&console.error("Error updating interest:",o)}console.log("Interest paths updated")}catch(n){console.error("Error in updateInterestPaths:",n)}})(),u()},[i,v]);const u=async()=>{try{const{data:t,error:n}=await h.from("interests").select("*").order("title");if(n)throw n;O(t)}catch(t){console.error("Error fetching interests:",t)}},I=(t=null)=>{t?(m(t),a({title:t.title,description:typeof t.description=="object"?JSON.stringify(t.description,null,2):t.description||"",image_path:t.image_path,content:t.content||""})):(m(null),a({title:"",description:"",image_path:"",content:""})),C(!0)},g=()=>{C(!1),m(null),a({title:"",description:"",image_path:"",content:""})},x=t=>{const{name:n,value:o}=t.target;a(M=>({...M,[n]:o}))},S=t=>n=>{a(o=>({...o,[t]:n||""}))},T=async()=>{try{const t={...s,description:s.description,user_id:(i==null?void 0:i.id)||null};if(p){const{error:n}=await h.from("interests").update(t).eq("id",p.id);if(n)throw n}else{const{error:n}=await h.from("interests").insert([t]);if(n)throw n}g(),u()}catch(t){console.error("Error saving interest:",t)}},W=async t=>{if(window.confirm("Are you sure you want to delete this interest?"))try{const{error:n}=await h.from("interests").delete().eq("id",t);if(n)throw n;u()}catch(n){console.error("Error deleting interest:",n)}};return e.jsxs(A,{maxWidth:"lg",sx:{mt:4},children:[e.jsxs(z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(c,{variant:"h4",component:"h1",children:"Manage Interests"}),e.jsx(j,{variant:"contained",color:"primary",startIcon:e.jsx(X,{}),onClick:()=>I(),children:"Add Interest"})]}),e.jsx(H,{component:P,children:e.jsxs(B,{children:[e.jsx(N,{children:e.jsxs(b,{children:[e.jsx(r,{children:"Title"}),e.jsx(r,{children:"Description"}),e.jsx(r,{children:"Content Preview"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(q,{children:_.map(t=>e.jsxs(b,{children:[e.jsx(r,{children:t.title}),e.jsx(r,{children:e.jsxs(c,{noWrap:!0,sx:{maxWidth:200},children:[typeof t.description=="object"?JSON.stringify(t.description).substring(0,100):(t.description||"").substring(0,100),(typeof t.description=="object"?JSON.stringify(t.description).length>100:(t.description||"").length>100)?"...":""]})}),e.jsx(r,{children:t.content?e.jsxs(c,{noWrap:!0,sx:{maxWidth:200},children:[t.content.substring(0,100),t.content.length>100?"...":""]}):e.jsx(c,{variant:"body2",color:"text.secondary",children:"No content"})}),e.jsxs(r,{children:[e.jsx(w,{onClick:()=>I(t),color:"primary",children:e.jsx(Z,{})}),e.jsx(w,{onClick:()=>W(t.id),color:"error",children:e.jsx(Y,{})})]})]},t.id))})]})}),e.jsxs(G,{open:E,onClose:g,maxWidth:"md",fullWidth:!0,children:[e.jsx(J,{children:p?"Edit Interest":"Add Interest"}),e.jsx(L,{children:e.jsxs(d,{container:!0,spacing:2,children:[e.jsx(d,{item:!0,xs:12,children:e.jsx(f,{name:"title",label:"Title",value:s.title,onChange:x,fullWidth:!0,margin:"normal"})}),e.jsx(d,{item:!0,xs:12,children:e.jsx(f,{name:"description",label:"Description",value:s.description,onChange:x,fullWidth:!0,multiline:!0,rows:3,margin:"normal"})}),e.jsx(d,{item:!0,xs:12,children:e.jsx(f,{name:"image_path",label:"Image Path",value:s.image_path,onChange:x,fullWidth:!0,margin:"normal"})}),e.jsxs(d,{item:!0,xs:12,children:[e.jsx(c,{variant:"subtitle1",gutterBottom:!0,children:"Content"}),e.jsx(R,{value:s.content,onChange:S("content")})]})]})}),e.jsxs(V,{children:[e.jsx(j,{onClick:g,children:"Cancel"}),e.jsx(j,{onClick:T,variant:"contained",color:"primary",children:"Save"})]})]})]})}export{ee as default};
//# sourceMappingURL=ManageInterests-CdnKf0C7.js.map
