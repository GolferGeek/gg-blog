import{f as w,j as o,r as d,B as t,l as C,q as v,Q as k,U as S,x as h,I as x,k as z,V as H}from"./vendor-CLzwre8y.js";import{s as m}from"./index-BJ8jdmwE.js";import{D as U}from"./Delete-BuOpn6KW.js";const E=w(o.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy");function N({onUpload:u,onRemove:g,existingImages:s=[]}){const[l,i]=d.useState(!1),[f,c]=d.useState(!1);async function j(e){try{i(!0);const a=e.target.files[0],b=a.name.split(".").pop(),n=`post-images/${`${Math.random()}.${b}`}`,{error:p}=await m.storage.from("post-images").upload(n,a);if(p)throw p;const{data:r}=m.storage.from("post-images").getPublicUrl(n);r!=null&&r.publicUrl&&u([r.publicUrl])}catch(a){alert("Error uploading image: "+a.message)}finally{i(!1)}}const y=e=>{const a=`![image](${e})`;navigator.clipboard.writeText(a),c(!0)};return o.jsxs(t,{children:[o.jsx(t,{sx:{mb:2},children:o.jsxs(C,{variant:"contained",component:"label",disabled:l,children:[l?o.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[o.jsx(v,{size:20,color:"inherit"}),o.jsx("span",{children:"Uploading..."})]}):"Upload Image",o.jsx("input",{type:"file",accept:"image/*",onChange:j,hidden:!0})]})}),(s==null?void 0:s.length)>0&&o.jsx(k,{sx:{width:"100%",maxHeight:400},cols:3,rowHeight:200,children:s.map((e,a)=>o.jsx(S,{sx:{position:"relative"},children:o.jsxs(t,{sx:{position:"relative",height:"100%","&:hover .image-actions":{opacity:1}},children:[o.jsx("img",{src:e,alt:`Post image ${a+1}`,loading:"lazy",style:{height:"200px",objectFit:"cover"}}),o.jsxs(t,{className:"image-actions",sx:{position:"absolute",top:0,right:0,padding:1,display:"flex",gap:1,opacity:0,transition:"opacity 0.2s",bgcolor:"rgba(0, 0, 0, 0.5)",borderRadius:"0 0 0 8px"},children:[o.jsx(h,{title:"Copy Markdown",children:o.jsx(x,{size:"small",onClick:()=>y(e),sx:{color:"white","&:hover":{bgcolor:"rgba(255, 255, 255, 0.2)"}},children:o.jsx(E,{})})}),o.jsx(h,{title:"Delete Image",children:o.jsx(x,{size:"small",onClick:()=>g(e),sx:{color:"white","&:hover":{bgcolor:"rgba(255, 255, 255, 0.2)"}},children:o.jsx(U,{})})})]})]})},e))}),(s==null?void 0:s.length)===0&&o.jsx(z,{color:"text.secondary",children:"No images uploaded yet"}),o.jsx(H,{open:f,autoHideDuration:2e3,onClose:()=>c(!1),message:"Markdown copied to clipboard!"})]})}export{N as I};
//# sourceMappingURL=ImageUpload-BpAgjyel.js.map
