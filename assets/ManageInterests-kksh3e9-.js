import{f as B,j as e,u as M,r as l,h as N,B as O,k as o,m,a0 as J,P as j,a1 as R,a2 as q,a3 as b,a4 as n,a5 as G,I as w,H,J as F,K as U,U as a,w as f,Q as z}from"./vendor-B9LkEojj.js";import{a as K,s as d}from"./index-Dm5WVTMK.js";import{E}from"./editor-BjFYD_qO.js";import{E as Q}from"./Edit-DWe6o_nX.js";import{D as V}from"./Delete-CHcx-bYn.js";import"./supabase-DqNG0bqa.js";const L=B(e.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");function re(){const{user:y}=K(),v=M(),[D,T]=l.useState([]),[S,I]=l.useState(!1),[h,p]=l.useState(null),[s,c]=l.useState({title:"",description:"",image_path:"",route_path:"",content:""}),W=[{title:"Coder",description:"Exploring the world of programming and software development",image_path:"/images/coder.jpg",route_path:"/coder"},{title:"Golfer",description:"Sharing golf experiences, tips, and achievements",image_path:"/images/golfer.jpg",route_path:"/golfer"},{title:"Mentor",description:"Guiding and supporting others in their journey",image_path:"/images/mentor.jpg",route_path:"/mentor"},{title:"Aging",description:"Insights and reflections on the aging process",image_path:"/images/aging.jpg",route_path:"/aging"}];l.useEffect(()=>{if(!y){v("/");return}(async()=>{try{for(const r of W){const{error:i}=await d.from("interests").update({image_path:r.image_path,description:r.description}).eq("title",r.title);i&&console.error("Error updating interest:",i)}console.log("Interest paths updated")}catch(r){console.error("Error in updateInterestPaths:",r)}})(),u()},[y,v]);const u=async()=>{try{const{data:t,error:r}=await d.from("interests").select("*").order("title");if(r)throw r;T(t)}catch(t){console.error("Error fetching interests:",t)}},_=(t=null)=>{t?(p(t),c({title:t.title,description:typeof t.description=="object"?JSON.stringify(t.description,null,2):t.description||"",image_path:t.image_path,route_path:t.route_path,content:t.content||""})):(p(null),c({title:"",description:"",image_path:"",route_path:"",content:""})),I(!0)},g=()=>{I(!1),p(null),c({title:"",description:"",image_path:"",route_path:"",content:""})},x=t=>{const{name:r,value:i}=t.target;c(P=>({...P,[r]:i}))},C=t=>r=>{c(i=>({...i,[t]:r||""}))},k=async()=>{try{const t={...s,description:s.description};if(h){const{error:r}=await d.from("interests").update(t).eq("id",h.id);if(r)throw r}else{const{error:r}=await d.from("interests").insert([t]);if(r)throw r}g(),u()}catch(t){console.error("Error saving interest:",t)}},A=async t=>{if(window.confirm("Are you sure you want to delete this interest?"))try{const{error:r}=await d.from("interests").delete().eq("id",t);if(r)throw r;u()}catch(r){console.error("Error deleting interest:",r)}};return e.jsxs(N,{maxWidth:"lg",sx:{mt:4},children:[e.jsxs(O,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(o,{variant:"h4",component:"h1",children:"Manage Interests"}),e.jsx(m,{variant:"contained",color:"primary",startIcon:e.jsx(L,{}),onClick:()=>_(),children:"Add Interest"})]}),e.jsx(J,{component:j,children:e.jsxs(R,{children:[e.jsx(q,{children:e.jsxs(b,{children:[e.jsx(n,{children:"Title"}),e.jsx(n,{children:"Description"}),e.jsx(n,{children:"Route Path"}),e.jsx(n,{children:"Content Preview"}),e.jsx(n,{children:"Actions"})]})}),e.jsx(G,{children:D.map(t=>e.jsxs(b,{children:[e.jsx(n,{children:t.title}),e.jsx(n,{children:e.jsxs(o,{noWrap:!0,sx:{maxWidth:200},children:[typeof t.description=="object"?JSON.stringify(t.description).substring(0,100):(t.description||"").substring(0,100),(typeof t.description=="object"?JSON.stringify(t.description).length>100:(t.description||"").length>100)?"...":""]})}),e.jsx(n,{children:t.route_path}),e.jsx(n,{children:t.content?e.jsxs(o,{noWrap:!0,sx:{maxWidth:200},children:[t.content.substring(0,100),t.content.length>100?"...":""]}):e.jsx(o,{variant:"body2",color:"text.secondary",children:"No content"})}),e.jsxs(n,{children:[e.jsx(w,{onClick:()=>_(t),color:"primary",children:e.jsx(Q,{})}),e.jsx(w,{onClick:()=>A(t.id),color:"error",children:e.jsx(V,{})})]})]},t.id))})]})}),e.jsxs(H,{open:S,onClose:g,maxWidth:"lg",fullWidth:!0,children:[e.jsx(F,{children:h?"Edit Interest":"Add Interest"}),e.jsx(U,{children:e.jsxs(a,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(a,{item:!0,xs:12,children:e.jsx(f,{name:"title",label:"Title",value:s.title,onChange:x,fullWidth:!0})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(f,{name:"image_path",label:"Image Path",value:s.image_path,onChange:x,fullWidth:!0})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(f,{name:"route_path",label:"Route Path",value:s.route_path,onChange:x,fullWidth:!0})}),e.jsxs(a,{item:!0,xs:12,children:[e.jsx(o,{variant:"subtitle1",gutterBottom:!0,children:"Description (Markdown)"}),e.jsx(j,{sx:{p:2},children:e.jsx(E,{value:s.description,onChange:C("description"),preview:"edit",height:200})})]}),e.jsxs(a,{item:!0,xs:12,children:[e.jsx(o,{variant:"subtitle1",gutterBottom:!0,children:"Content (Markdown)"}),e.jsx(j,{sx:{p:2},children:e.jsx(E,{value:s.content,onChange:C("content"),preview:"edit",height:400})})]})]})}),e.jsxs(z,{children:[e.jsx(m,{onClick:g,children:"Cancel"}),e.jsx(m,{onClick:k,variant:"contained",color:"primary",children:h?"Update":"Create"})]})]})]})}export{re as default};
//# sourceMappingURL=ManageInterests-kksh3e9-.js.map
