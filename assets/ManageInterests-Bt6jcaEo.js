import{f,j as e,u as P,r as l,h as A,B as u,k as s,l as j,W as z,P as H,X as N,Y as R,Z as I,$ as n,a0 as q,I as E,a1 as G,a2 as J,a3 as L,H as c,z as _,a4 as V}from"./vendor-CLzwre8y.js";import{a as F,s as h}from"./index-BJ8jdmwE.js";import{E as O}from"./editor-CmZuVxSC.js";import"./supabase-DTekwhgc.js";const U=f(e.jsx("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutlineOutlined"),X=f(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutlineOutlined"),Y=f(e.jsx("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92zM17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"}),"EditOutlined");function ee(){const{user:i}=F(),w=P(),[S,k]=l.useState([]),[D,b]=l.useState(!1),[p,m]=l.useState(null),[o,d]=l.useState({title:"",description:"",image_path:"",content:""}),T=[{name:"coder",title:"Coder",description:"Exploring the world of programming and software development",image_path:"/images/coder.jpg",route_path:"/coder"},{name:"golfer",title:"Golfer",description:"Sharing golf experiences, tips, and achievements",image_path:"/images/golfer.jpg",route_path:"/golfer"},{name:"mentor",title:"Mentor",description:"Guiding and supporting others in their journey",image_path:"/images/mentor.jpg",route_path:"/mentor"},{name:"older",title:"Older",description:"Insights and reflections on the aging process",image_path:"/images/older.jpg",route_path:"/older"}];l.useEffect(()=>{if(!i||i.email!=="golfergeek@gmail.com"){w("/");return}(async()=>{try{for(const r of T){const{error:a}=await h.from("interests").update({image_path:r.image_path}).eq("name",r.name);a&&console.error("Error updating interest:",a)}console.log("Interest paths updated")}catch(r){console.error("Error in updateInterestPaths:",r)}})(),g()},[i,w]);const g=async()=>{try{const{data:t,error:r}=await h.from("interests").select("*").order("title");if(r)throw r;k(t)}catch(t){console.error("Error fetching interests:",t)}},v=(t=null)=>{t?(m(t),d({title:t.title,description:typeof t.description=="object"?JSON.stringify(t.description,null,2):t.description||"",image_path:t.image_path,content:t.content||""})):(m(null),d({title:"",description:"",image_path:"",content:""})),b(!0)},x=()=>{b(!1),m(null),d({title:"",description:"",image_path:"",content:""})},y=t=>{const{name:r,value:a}=t.target;d(B=>({...B,[r]:a}))},C=t=>r=>{d(a=>({...a,[t]:r||""}))},M=async()=>{try{const t={...o,description:o.description,user_id:(i==null?void 0:i.id)||null};if(p){const{error:r}=await h.from("interests").update(t).eq("id",p.id);if(r)throw r}else{const{error:r}=await h.from("interests").insert([t]);if(r)throw r}x(),g()}catch(t){console.error("Error saving interest:",t)}},W=async t=>{if(window.confirm("Are you sure you want to delete this interest?"))try{const{error:r}=await h.from("interests").delete().eq("id",t);if(r)throw r;g()}catch(r){console.error("Error deleting interest:",r)}};return e.jsxs(A,{maxWidth:"lg",sx:{mt:4},children:[e.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(s,{variant:"h4",component:"h1",children:"Manage Interests"}),e.jsx(j,{variant:"contained",color:"primary",startIcon:e.jsx(U,{}),onClick:()=>v(),children:"Add Interest"})]}),e.jsx(z,{component:H,children:e.jsxs(N,{children:[e.jsx(R,{children:e.jsxs(I,{children:[e.jsx(n,{children:"Title"}),e.jsx(n,{children:"Description"}),e.jsx(n,{children:"Content Preview"}),e.jsx(n,{children:"Actions"})]})}),e.jsx(q,{children:S.map(t=>e.jsxs(I,{children:[e.jsx(n,{children:t.title}),e.jsx(n,{children:e.jsxs(s,{noWrap:!0,sx:{maxWidth:200},children:[typeof t.description=="object"?JSON.stringify(t.description).substring(0,100):(t.description||"").substring(0,100),(typeof t.description=="object"?JSON.stringify(t.description).length>100:(t.description||"").length>100)?"...":""]})}),e.jsx(n,{children:t.content?e.jsxs(s,{noWrap:!0,sx:{maxWidth:200},children:[t.content.substring(0,100),t.content.length>100?"...":""]}):e.jsx(s,{variant:"body2",color:"text.secondary",children:"No content"})}),e.jsxs(n,{children:[e.jsx(E,{onClick:()=>v(t),color:"primary",children:e.jsx(Y,{})}),e.jsx(E,{onClick:()=>W(t.id),color:"error",children:e.jsx(X,{})})]})]},t.id))})]})}),e.jsxs(G,{open:D,onClose:x,maxWidth:"lg",fullWidth:!0,children:[e.jsx(J,{children:p?"Edit Interest":"Add Interest"}),e.jsx(L,{children:e.jsxs(c,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(c,{item:!0,xs:12,children:e.jsx(_,{name:"title",label:"Title",value:o.title,onChange:y,fullWidth:!0})}),e.jsx(c,{item:!0,xs:12,md:6,children:e.jsx(_,{name:"image_path",label:"Image Path",value:o.image_path,onChange:y,fullWidth:!0})}),e.jsxs(c,{item:!0,xs:12,children:[e.jsx(s,{variant:"subtitle1",gutterBottom:!0,children:"Description (Markdown)"}),e.jsx(u,{sx:{"& .w-md-editor":{margin:0,boxShadow:"none",border:"1px solid rgba(0, 0, 0, 0.23)",borderRadius:1,height:"1000px"},"& .wmde-markdown":{padding:"16px"},"& .w-md-editor-toolbar":{padding:"8px",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},"& .w-md-editor-content":{height:"calc(100% - 40px) !important"},"& .w-md-editor-input":{height:"100% !important"},"& .w-md-editor-text":{height:"100% !important"},"& .w-md-editor-text-input":{padding:"16px !important",height:"100% !important"},"& .w-md-editor-preview":{padding:"16px !important",height:"100% !important"}},children:e.jsx(O,{value:o.description,onChange:C("description"),preview:"edit",highlightEnable:!1,textareaProps:{placeholder:"Enter description here..."}})})]}),e.jsxs(c,{item:!0,xs:12,children:[e.jsx(s,{variant:"subtitle1",gutterBottom:!0,children:"Content (Markdown)"}),e.jsx(u,{sx:{"& .w-md-editor":{margin:0,boxShadow:"none",border:"1px solid rgba(0, 0, 0, 0.23)",borderRadius:1,height:"1000px"},"& .wmde-markdown":{padding:"16px"},"& .w-md-editor-toolbar":{padding:"8px",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},"& .w-md-editor-content":{height:"calc(100% - 40px) !important"},"& .w-md-editor-input":{height:"100% !important"},"& .w-md-editor-text":{height:"100% !important"},"& .w-md-editor-text-input":{padding:"16px !important",height:"100% !important"},"& .w-md-editor-preview":{padding:"16px !important",height:"100% !important"}},children:e.jsx(O,{value:o.content,onChange:C("content"),preview:"edit",highlightEnable:!1,textareaProps:{placeholder:"Enter content here..."}})})]})]})}),e.jsxs(V,{children:[e.jsx(j,{onClick:x,children:"Cancel"}),e.jsx(j,{onClick:M,variant:"contained",color:"primary",children:p?"Update":"Create"})]})]})]})}export{ee as default};
//# sourceMappingURL=ManageInterests-Bt6jcaEo.js.map
