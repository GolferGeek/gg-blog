{"version":3,"file":"ManageInterests-CwRiVefF.js","sources":["../../node_modules/@mui/icons-material/esm/Add.js","../../src/pages/ManageInterests.jsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z\"\n}), 'Add');","import { useState, useEffect } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport { useAuth } from '../contexts/AuthContext'\nimport { supabase } from '../lib/supabase'\nimport MDEditor from '@uiw/react-md-editor'\nimport {\n  Container,\n  Typography,\n  Button,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  IconButton,\n  Box,\n  Grid,\n} from '@mui/material'\nimport EditIcon from '@mui/icons-material/Edit'\nimport DeleteIcon from '@mui/icons-material/Delete'\nimport AddIcon from '@mui/icons-material/Add'\n\nfunction ManageInterests() {\n  const { user } = useAuth()\n  const navigate = useNavigate()\n  const [interests, setInterests] = useState([])\n  const [open, setOpen] = useState(false)\n  const [editingInterest, setEditingInterest] = useState(null)\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    image_path: '',\n    route_path: '',\n    content: ''\n  })\n\n  const defaultInterests = [\n    {\n      title: 'Coder',\n      description: 'Exploring the world of programming and software development',\n      image_path: '/images/coder.jpg',\n      route_path: '/coder'\n    },\n    {\n      title: 'Golfer',\n      description: 'Sharing golf experiences, tips, and achievements',\n      image_path: '/images/golfer.jpg',\n      route_path: '/golfer'\n    },\n    {\n      title: 'Mentor',\n      description: 'Guiding and supporting others in their journey',\n      image_path: '/images/mentor.jpg',\n      route_path: '/mentor'\n    },\n    {\n      title: 'Aging',\n      description: 'Insights and reflections on the aging process',\n      image_path: '/images/aging.jpg',\n      route_path: '/aging'\n    }\n  ]\n\n  useEffect(() => {\n    if (!user) {\n      navigate('/')\n      return\n    }\n    \n    // Update interests with correct image paths\n    const updateInterestPaths = async () => {\n      try {\n        for (const defaultInterest of defaultInterests) {\n          const { error } = await supabase\n            .from('interests')\n            .update({ \n              image_path: defaultInterest.image_path,\n              description: defaultInterest.description \n            })\n            .eq('title', defaultInterest.title)\n          \n          if (error) {\n            console.error('Error updating interest:', error)\n          }\n        }\n        console.log('Interest paths updated')\n      } catch (error) {\n        console.error('Error in updateInterestPaths:', error)\n      }\n    }\n    \n    updateInterestPaths()\n    fetchInterests()\n  }, [user, navigate])\n\n  const fetchInterests = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('interests')\n        .select('*')\n        .order('title')\n\n      if (error) throw error\n      setInterests(data)\n    } catch (error) {\n      console.error('Error fetching interests:', error)\n    }\n  }\n\n  const handleOpen = (interest = null) => {\n    if (interest) {\n      setEditingInterest(interest)\n      setFormData({\n        title: interest.title,\n        description: typeof interest.description === 'object' \n          ? JSON.stringify(interest.description, null, 2)\n          : interest.description || '',\n        image_path: interest.image_path,\n        route_path: interest.route_path,\n        content: interest.content || ''\n      })\n    } else {\n      setEditingInterest(null)\n      setFormData({\n        title: '',\n        description: '',\n        image_path: '',\n        route_path: '',\n        content: ''\n      })\n    }\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n    setEditingInterest(null)\n    setFormData({\n      title: '',\n      description: '',\n      image_path: '',\n      route_path: '',\n      content: ''\n    })\n  }\n\n  const handleChange = (e) => {\n    const { name, value } = e.target\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }))\n  }\n\n  const handleMarkdownChange = (name) => (value) => {\n    setFormData(prev => ({\n      ...prev,\n      [name]: value || ''\n    }))\n  }\n\n  const handleSubmit = async () => {\n    try {\n      const submissionData = {\n        ...formData,\n        description: formData.description\n      }\n\n      if (editingInterest) {\n        const { error } = await supabase\n          .from('interests')\n          .update(submissionData)\n          .eq('id', editingInterest.id)\n\n        if (error) throw error\n      } else {\n        const { error } = await supabase\n          .from('interests')\n          .insert([submissionData])\n\n        if (error) throw error\n      }\n\n      handleClose()\n      fetchInterests()\n    } catch (error) {\n      console.error('Error saving interest:', error)\n    }\n  }\n\n  const handleDelete = async (id) => {\n    if (window.confirm('Are you sure you want to delete this interest?')) {\n      try {\n        const { error } = await supabase\n          .from('interests')\n          .delete()\n          .eq('id', id)\n\n        if (error) throw error\n        fetchInterests()\n      } catch (error) {\n        console.error('Error deleting interest:', error)\n      }\n    }\n  }\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ mt: 4 }}>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Typography variant=\"h4\" component=\"h1\">\n          Manage Interests\n        </Typography>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          startIcon={<AddIcon />}\n          onClick={() => handleOpen()}\n        >\n          Add Interest\n        </Button>\n      </Box>\n\n      <TableContainer component={Paper}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Title</TableCell>\n              <TableCell>Description</TableCell>\n              <TableCell>Route Path</TableCell>\n              <TableCell>Content Preview</TableCell>\n              <TableCell>Actions</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {interests.map((interest) => (\n              <TableRow key={interest.id}>\n                <TableCell>{interest.title}</TableCell>\n                <TableCell>\n                  <Typography noWrap sx={{ maxWidth: 200 }}>\n                    {typeof interest.description === 'object' \n                      ? JSON.stringify(interest.description).substring(0, 100)\n                      : (interest.description || '').substring(0, 100)}\n                    {(typeof interest.description === 'object' \n                      ? JSON.stringify(interest.description).length > 100\n                      : (interest.description || '').length > 100) ? '...' : ''}\n                  </Typography>\n                </TableCell>\n                <TableCell>{interest.route_path}</TableCell>\n                <TableCell>\n                  {interest.content ? (\n                    <Typography noWrap sx={{ maxWidth: 200 }}>\n                      {interest.content.substring(0, 100)}\n                      {interest.content.length > 100 ? '...' : ''}\n                    </Typography>\n                  ) : (\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      No content\n                    </Typography>\n                  )}\n                </TableCell>\n                <TableCell>\n                  <IconButton onClick={() => handleOpen(interest)} color=\"primary\">\n                    <EditIcon />\n                  </IconButton>\n                  <IconButton onClick={() => handleDelete(interest.id)} color=\"error\">\n                    <DeleteIcon />\n                  </IconButton>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n\n      <Dialog open={open} onClose={handleClose} maxWidth=\"lg\" fullWidth>\n        <DialogTitle>\n          {editingInterest ? 'Edit Interest' : 'Add Interest'}\n        </DialogTitle>\n        <DialogContent>\n          <Grid container spacing={2} sx={{ mt: 1 }}>\n            <Grid item xs={12}>\n              <TextField\n                name=\"title\"\n                label=\"Title\"\n                value={formData.title}\n                onChange={handleChange}\n                fullWidth\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                name=\"image_path\"\n                label=\"Image Path\"\n                value={formData.image_path}\n                onChange={handleChange}\n                fullWidth\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                name=\"route_path\"\n                label=\"Route Path\"\n                value={formData.route_path}\n                onChange={handleChange}\n                fullWidth\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <Typography variant=\"subtitle1\" gutterBottom>\n                Description (Markdown)\n              </Typography>\n              <Paper sx={{ p: 2 }}>\n                <MDEditor\n                  value={formData.description}\n                  onChange={handleMarkdownChange('description')}\n                  preview=\"edit\"\n                  height={200}\n                />\n              </Paper>\n            </Grid>\n            <Grid item xs={12}>\n              <Typography variant=\"subtitle1\" gutterBottom>\n                Content (Markdown)\n              </Typography>\n              <Paper sx={{ p: 2 }}>\n                <MDEditor\n                  value={formData.content}\n                  onChange={handleMarkdownChange('content')}\n                  preview=\"edit\"\n                  height={400}\n                />\n              </Paper>\n            </Grid>\n          </Grid>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}>Cancel</Button>\n          <Button onClick={handleSubmit} variant=\"contained\" color=\"primary\">\n            {editingInterest ? 'Update' : 'Create'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Container>\n  )\n}\n\nexport default ManageInterests\n"],"names":["AddIcon","createSvgIcon","_jsx","ManageInterests","user","useAuth","navigate","useNavigate","interests","setInterests","useState","open","setOpen","editingInterest","setEditingInterest","formData","setFormData","defaultInterests","useEffect","defaultInterest","error","supabase","fetchInterests","data","handleOpen","interest","handleClose","handleChange","e","name","value","prev","handleMarkdownChange","handleSubmit","submissionData","handleDelete","id","jsxs","Container","Box","jsx","Typography","Button","TableContainer","Paper","Table","TableHead","TableRow","TableCell","TableBody","IconButton","EditIcon","DeleteIcon","Dialog","DialogTitle","DialogContent","Grid","TextField","MDEditor","DialogActions"],"mappings":"6XAIA,MAAAA,EAAeC,EAA2BC,EAAI,IAAC,OAAQ,CACrD,EAAG,mCACL,CAAC,EAAG,KAAK,ECuBT,SAASC,IAAkB,CACnB,KAAA,CAAE,KAAAC,CAAK,EAAIC,EAAQ,EACnBC,EAAWC,EAAY,EACvB,CAACC,EAAWC,CAAY,EAAIC,EAAAA,SAAS,CAAA,CAAE,EACvC,CAACC,EAAMC,CAAO,EAAIF,EAAAA,SAAS,EAAK,EAChC,CAACG,EAAiBC,CAAkB,EAAIJ,EAAAA,SAAS,IAAI,EACrD,CAACK,EAAUC,CAAW,EAAIN,WAAS,CACvC,MAAO,GACP,YAAa,GACb,WAAY,GACZ,WAAY,GACZ,QAAS,EAAA,CACV,EAEKO,EAAmB,CACvB,CACE,MAAO,QACP,YAAa,8DACb,WAAY,oBACZ,WAAY,QACd,EACA,CACE,MAAO,SACP,YAAa,mDACb,WAAY,qBACZ,WAAY,SACd,EACA,CACE,MAAO,SACP,YAAa,iDACb,WAAY,qBACZ,WAAY,SACd,EACA,CACE,MAAO,QACP,YAAa,gDACb,WAAY,oBACZ,WAAY,QAAA,CAEhB,EAEAC,EAAAA,UAAU,IAAM,CACd,GAAI,CAACd,EAAM,CACTE,EAAS,GAAG,EACZ,MAAA,EAI0B,SAAY,CAClC,GAAA,CACF,UAAWa,KAAmBF,EAAkB,CACxC,KAAA,CAAE,MAAAG,GAAU,MAAMC,EACrB,KAAK,WAAW,EAChB,OAAO,CACN,WAAYF,EAAgB,WAC5B,YAAaA,EAAgB,WAC9B,CAAA,EACA,GAAG,QAASA,EAAgB,KAAK,EAEhCC,GACM,QAAA,MAAM,2BAA4BA,CAAK,CACjD,CAEF,QAAQ,IAAI,wBAAwB,QAC7BA,EAAO,CACN,QAAA,MAAM,gCAAiCA,CAAK,CAAA,CAExD,GAEoB,EACLE,EAAA,CAAA,EACd,CAAClB,EAAME,CAAQ,CAAC,EAEnB,MAAMgB,EAAiB,SAAY,CAC7B,GAAA,CACF,KAAM,CAAE,KAAAC,EAAM,MAAAH,CAAM,EAAI,MAAMC,EAC3B,KAAK,WAAW,EAChB,OAAO,GAAG,EACV,MAAM,OAAO,EAEhB,GAAID,EAAa,MAAAA,EACjBX,EAAac,CAAI,QACVH,EAAO,CACN,QAAA,MAAM,4BAA6BA,CAAK,CAAA,CAEpD,EAEMI,EAAa,CAACC,EAAW,OAAS,CAClCA,GACFX,EAAmBW,CAAQ,EACfT,EAAA,CACV,MAAOS,EAAS,MAChB,YAAa,OAAOA,EAAS,aAAgB,SACzC,KAAK,UAAUA,EAAS,YAAa,KAAM,CAAC,EAC5CA,EAAS,aAAe,GAC5B,WAAYA,EAAS,WACrB,WAAYA,EAAS,WACrB,QAASA,EAAS,SAAW,EAAA,CAC9B,IAEDX,EAAmB,IAAI,EACXE,EAAA,CACV,MAAO,GACP,YAAa,GACb,WAAY,GACZ,WAAY,GACZ,QAAS,EAAA,CACV,GAEHJ,EAAQ,EAAI,CACd,EAEMc,EAAc,IAAM,CACxBd,EAAQ,EAAK,EACbE,EAAmB,IAAI,EACXE,EAAA,CACV,MAAO,GACP,YAAa,GACb,WAAY,GACZ,WAAY,GACZ,QAAS,EAAA,CACV,CACH,EAEMW,EAAgBC,GAAM,CAC1B,KAAM,CAAE,KAAAC,EAAM,MAAAC,CAAM,EAAIF,EAAE,OAC1BZ,EAAqBe,IAAA,CACnB,GAAGA,EACH,CAACF,CAAI,EAAGC,CAAA,EACR,CACJ,EAEME,EAAwBH,GAAUC,GAAU,CAChDd,EAAqBe,IAAA,CACnB,GAAGA,EACH,CAACF,CAAI,EAAGC,GAAS,EAAA,EACjB,CACJ,EAEMG,EAAe,SAAY,CAC3B,GAAA,CACF,MAAMC,EAAiB,CACrB,GAAGnB,EACH,YAAaA,EAAS,WACxB,EAEA,GAAIF,EAAiB,CACnB,KAAM,CAAE,MAAAO,CAAU,EAAA,MAAMC,EACrB,KAAK,WAAW,EAChB,OAAOa,CAAc,EACrB,GAAG,KAAMrB,EAAgB,EAAE,EAE9B,GAAIO,EAAa,MAAAA,CAAA,KACZ,CACC,KAAA,CAAE,MAAAA,GAAU,MAAMC,EACrB,KAAK,WAAW,EAChB,OAAO,CAACa,CAAc,CAAC,EAE1B,GAAId,EAAa,MAAAA,CAAA,CAGPM,EAAA,EACGJ,EAAA,QACRF,EAAO,CACN,QAAA,MAAM,yBAA0BA,CAAK,CAAA,CAEjD,EAEMe,EAAe,MAAOC,GAAO,CAC7B,GAAA,OAAO,QAAQ,gDAAgD,EAC7D,GAAA,CACF,KAAM,CAAE,MAAAhB,CAAA,EAAU,MAAMC,EACrB,KAAK,WAAW,EAChB,OAAO,EACP,GAAG,KAAMe,CAAE,EAEd,GAAIhB,EAAa,MAAAA,EACFE,EAAA,QACRF,EAAO,CACN,QAAA,MAAM,2BAA4BA,CAAK,CAAA,CAGrD,EAGE,OAAAiB,EAAA,KAACC,GAAU,SAAS,KAAK,GAAI,CAAE,GAAI,CACjC,EAAA,SAAA,CAACD,EAAAA,KAAAE,EAAA,CAAI,GAAI,CAAE,QAAS,OAAQ,eAAgB,gBAAiB,WAAY,SAAU,GAAI,CAAA,EACrF,SAAA,CAAAC,MAACC,EAAW,CAAA,QAAQ,KAAK,UAAU,KAAK,SAExC,mBAAA,EACAD,EAAA,IAACE,EAAA,CACC,QAAQ,YACR,MAAM,UACN,gBAAY1C,EAAQ,EAAA,EACpB,QAAS,IAAMwB,EAAW,EAC3B,SAAA,cAAA,CAAA,CAED,EACF,EAECgB,MAAAG,EAAA,CAAe,UAAWC,EACzB,gBAACC,EACC,CAAA,SAAA,CAACL,EAAA,IAAAM,EAAA,CACC,gBAACC,EACC,CAAA,SAAA,CAAAP,EAAAA,IAACQ,GAAU,SAAK,OAAA,CAAA,EAChBR,EAAAA,IAACQ,GAAU,SAAW,aAAA,CAAA,EACtBR,EAAAA,IAACQ,GAAU,SAAU,YAAA,CAAA,EACrBR,EAAAA,IAACQ,GAAU,SAAe,iBAAA,CAAA,EAC1BR,EAAAA,IAACQ,GAAU,SAAO,SAAA,CAAA,CAAA,CAAA,CACpB,CACF,CAAA,QACCC,EACE,CAAA,SAAAzC,EAAU,IAAKiB,UACbsB,EACC,CAAA,SAAA,CAACP,EAAAA,IAAAQ,EAAA,CAAW,WAAS,KAAM,CAAA,EAC3BR,EAAAA,IAACQ,EACC,CAAA,SAAAX,EAAAA,KAACI,EAAW,CAAA,OAAM,GAAC,GAAI,CAAE,SAAU,GAAA,EAChC,SAAA,CAAA,OAAOhB,EAAS,aAAgB,SAC7B,KAAK,UAAUA,EAAS,WAAW,EAAE,UAAU,EAAG,GAAG,GACpDA,EAAS,aAAe,IAAI,UAAU,EAAG,GAAG,GAC/C,OAAOA,EAAS,aAAgB,SAC9B,KAAK,UAAUA,EAAS,WAAW,EAAE,OAAS,KAC7CA,EAAS,aAAe,IAAI,OAAS,KAAO,MAAQ,EAAA,CAAA,CAC3D,CACF,CAAA,EACAe,EAAAA,IAACQ,EAAW,CAAA,SAAAvB,EAAS,UAAW,CAAA,EAC/Be,EAAA,IAAAQ,EAAA,CACE,SAASvB,EAAA,QACPY,EAAAA,KAAAI,EAAA,CAAW,OAAM,GAAC,GAAI,CAAE,SAAU,GAChC,EAAA,SAAA,CAAShB,EAAA,QAAQ,UAAU,EAAG,GAAG,EACjCA,EAAS,QAAQ,OAAS,IAAM,MAAQ,EAC3C,CAAA,CAAA,QAECgB,EAAW,CAAA,QAAQ,QAAQ,MAAM,iBAAiB,sBAEnD,CAEJ,CAAA,SACCO,EACC,CAAA,SAAA,CAACR,EAAAA,IAAAU,EAAA,CAAW,QAAS,IAAM1B,EAAWC,CAAQ,EAAG,MAAM,UACrD,SAACe,EAAAA,IAAAW,EAAA,CAAA,CAAS,CACZ,CAAA,EACCX,EAAAA,IAAAU,EAAA,CAAW,QAAS,IAAMf,EAAaV,EAAS,EAAE,EAAG,MAAM,QAC1D,SAACe,EAAA,IAAAY,EAAA,CAAW,CAAA,CACd,CAAA,CAAA,CACF,CAAA,CAAA,GAhCa3B,EAAS,EAiCxB,CACD,CACH,CAAA,CAAA,CAAA,CACF,CACF,CAAA,EAEAY,EAAAA,KAACgB,GAAO,KAAA1C,EAAY,QAASe,EAAa,SAAS,KAAK,UAAS,GAC/D,SAAA,CAACc,EAAA,IAAAc,EAAA,CACE,SAAkBzC,EAAA,gBAAkB,eACvC,EACC2B,EAAA,IAAAe,EAAA,CACC,SAAClB,EAAAA,KAAAmB,EAAA,CAAK,UAAS,GAAC,QAAS,EAAG,GAAI,CAAE,GAAI,CACpC,EAAA,SAAA,CAAAhB,EAAA,IAACgB,EAAK,CAAA,KAAI,GAAC,GAAI,GACb,SAAAhB,EAAA,IAACiB,EAAA,CACC,KAAK,QACL,MAAM,QACN,MAAO1C,EAAS,MAChB,SAAUY,EACV,UAAS,EAAA,CAAA,EAEb,QACC6B,EAAK,CAAA,KAAI,GAAC,GAAI,GAAI,GAAI,EACrB,SAAAhB,EAAA,IAACiB,EAAA,CACC,KAAK,aACL,MAAM,aACN,MAAO1C,EAAS,WAChB,SAAUY,EACV,UAAS,EAAA,CAAA,EAEb,QACC6B,EAAK,CAAA,KAAI,GAAC,GAAI,GAAI,GAAI,EACrB,SAAAhB,EAAA,IAACiB,EAAA,CACC,KAAK,aACL,MAAM,aACN,MAAO1C,EAAS,WAChB,SAAUY,EACV,UAAS,EAAA,CAAA,EAEb,EACCU,EAAA,KAAAmB,EAAA,CAAK,KAAI,GAAC,GAAI,GACb,SAAA,CAAAhB,MAACC,EAAW,CAAA,QAAQ,YAAY,aAAY,GAAC,SAE7C,yBAAA,QACCG,EAAM,CAAA,GAAI,CAAE,EAAG,GACd,SAAAJ,EAAA,IAACkB,EAAA,CACC,MAAO3C,EAAS,YAChB,SAAUiB,EAAqB,aAAa,EAC5C,QAAQ,OACR,OAAQ,GAAA,CAAA,CAEZ,CAAA,CAAA,EACF,EACCK,EAAA,KAAAmB,EAAA,CAAK,KAAI,GAAC,GAAI,GACb,SAAA,CAAAhB,MAACC,EAAW,CAAA,QAAQ,YAAY,aAAY,GAAC,SAE7C,qBAAA,QACCG,EAAM,CAAA,GAAI,CAAE,EAAG,GACd,SAAAJ,EAAA,IAACkB,EAAA,CACC,MAAO3C,EAAS,QAChB,SAAUiB,EAAqB,SAAS,EACxC,QAAQ,OACR,OAAQ,GAAA,CAAA,CAEZ,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CACF,CACF,CAAA,SACC2B,EACC,CAAA,SAAA,CAACnB,EAAA,IAAAE,EAAA,CAAO,QAAShB,EAAa,SAAM,SAAA,EACpCc,EAAAA,IAACE,EAAO,CAAA,QAAST,EAAc,QAAQ,YAAY,MAAM,UACtD,SAAkBpB,EAAA,SAAW,QAChC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,EACF,CAEJ","x_google_ignoreList":[0]}