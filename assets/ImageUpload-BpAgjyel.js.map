{"version":3,"file":"ImageUpload-BpAgjyel.js","sources":["../../node_modules/@mui/icons-material/esm/ContentCopy.js","../../src/components/ImageUpload.jsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z\"\n}), 'ContentCopy');","import { useState } from 'react'\nimport { supabase } from '../lib/supabase'\nimport { \n  Button, \n  Box, \n  ImageList, \n  ImageListItem, \n  IconButton, \n  Typography,\n  CircularProgress,\n  Tooltip,\n  Snackbar\n} from '@mui/material'\nimport { Delete as DeleteIcon, ContentCopy as ContentCopyIcon } from '@mui/icons-material'\n\nfunction ImageUpload({ onUpload, onRemove, existingImages = [] }) {\n  const [uploading, setUploading] = useState(false)\n  const [showCopySuccess, setShowCopySuccess] = useState(false)\n\n  async function handleUpload(event) {\n    try {\n      setUploading(true)\n\n      const file = event.target.files[0]\n      const fileExt = file.name.split('.').pop()\n      const fileName = `${Math.random()}.${fileExt}`\n      const filePath = `post-images/${fileName}`\n\n      const { error: uploadError } = await supabase.storage\n        .from('post-images')\n        .upload(filePath, file)\n\n      if (uploadError) throw uploadError\n\n      const { data } = supabase.storage\n        .from('post-images')\n        .getPublicUrl(filePath)\n\n      if (data?.publicUrl) {\n        onUpload([data.publicUrl])\n      }\n    } catch (error) {\n      alert('Error uploading image: ' + error.message)\n    } finally {\n      setUploading(false)\n    }\n  }\n\n  const handleCopyMarkdown = (imageUrl) => {\n    const markdownSyntax = `![image](${imageUrl})`\n    navigator.clipboard.writeText(markdownSyntax)\n    setShowCopySuccess(true)\n  }\n\n  return (\n    <Box>\n      <Box sx={{ mb: 2 }}>\n        <Button\n          variant=\"contained\"\n          component=\"label\"\n          disabled={uploading}\n        >\n          {uploading ? (\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n              <CircularProgress size={20} color=\"inherit\" />\n              <span>Uploading...</span>\n            </Box>\n          ) : (\n            'Upload Image'\n          )}\n          <input\n            type=\"file\"\n            accept=\"image/*\"\n            onChange={handleUpload}\n            hidden\n          />\n        </Button>\n      </Box>\n\n      {existingImages?.length > 0 && (\n        <ImageList sx={{ width: '100%', maxHeight: 400 }} cols={3} rowHeight={200}>\n          {existingImages.map((imageUrl, index) => (\n            <ImageListItem key={imageUrl} sx={{ position: 'relative' }}>\n              <Box\n                sx={{\n                  position: 'relative',\n                  height: '100%',\n                  '&:hover .image-actions': {\n                    opacity: 1,\n                  },\n                }}\n              >\n                <img\n                  src={imageUrl}\n                  alt={`Post image ${index + 1}`}\n                  loading=\"lazy\"\n                  style={{ height: '200px', objectFit: 'cover' }}\n                />\n                <Box\n                  className=\"image-actions\"\n                  sx={{\n                    position: 'absolute',\n                    top: 0,\n                    right: 0,\n                    padding: 1,\n                    display: 'flex',\n                    gap: 1,\n                    opacity: 0,\n                    transition: 'opacity 0.2s',\n                    bgcolor: 'rgba(0, 0, 0, 0.5)',\n                    borderRadius: '0 0 0 8px',\n                  }}\n                >\n                  <Tooltip title=\"Copy Markdown\">\n                    <IconButton\n                      size=\"small\"\n                      onClick={() => handleCopyMarkdown(imageUrl)}\n                      sx={{\n                        color: 'white',\n                        '&:hover': {\n                          bgcolor: 'rgba(255, 255, 255, 0.2)',\n                        },\n                      }}\n                    >\n                      <ContentCopyIcon />\n                    </IconButton>\n                  </Tooltip>\n                  <Tooltip title=\"Delete Image\">\n                    <IconButton\n                      size=\"small\"\n                      onClick={() => onRemove(imageUrl)}\n                      sx={{\n                        color: 'white',\n                        '&:hover': {\n                          bgcolor: 'rgba(255, 255, 255, 0.2)',\n                        },\n                      }}\n                    >\n                      <DeleteIcon />\n                    </IconButton>\n                  </Tooltip>\n                </Box>\n              </Box>\n            </ImageListItem>\n          ))}\n        </ImageList>\n      )}\n\n      {existingImages?.length === 0 && (\n        <Typography color=\"text.secondary\">\n          No images uploaded yet\n        </Typography>\n      )}\n\n      <Snackbar\n        open={showCopySuccess}\n        autoHideDuration={2000}\n        onClose={() => setShowCopySuccess(false)}\n        message=\"Markdown copied to clipboard!\"\n      />\n    </Box>\n  )\n}\n\nexport default ImageUpload"],"names":["ContentCopyIcon","createSvgIcon","_jsx","ImageUpload","onUpload","onRemove","existingImages","uploading","setUploading","useState","showCopySuccess","setShowCopySuccess","handleUpload","event","file","fileExt","filePath","uploadError","supabase","data","error","handleCopyMarkdown","imageUrl","markdownSyntax","Box","jsx","jsxs","Button","CircularProgress","ImageList","index","ImageListItem","Tooltip","IconButton","DeleteIcon","Typography","Snackbar"],"mappings":"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","x_google_ignoreList":[0]}